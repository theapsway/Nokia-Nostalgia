services:
  # The combined Frontend + Backend Application
  - type: web
    name: nokia-nostalgia
    env: docker
    plan: free
    region: oregon
    dockerContext: .
    dockerfilePath: Dockerfile
    healthCheckPath: /api/spectate/health
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: nokia-nostalgia-db
          property: connectionString
      - key: PORT
        value: 10000

databases:
  # Managed PostgreSQL
  - name: nokia-nostalgia-db
    databaseName: nokia_nostalgia
    user: user
    plan: free
    region: oregon
    ipAllowList: [] # Access only from internal services by default
